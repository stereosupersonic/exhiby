!!! 5
%html{ lang: "de" }
  %head
    %meta{ charset: "utf-8" }
    %meta{ name: "viewport", content: "width=device-width, initial-scale=1" }
    %title OnlineMuseum Wartenberg - Admin
    %meta{ name: "turbo-cache-control", content: "no-cache" }
    = csrf_meta_tags
    = csp_meta_tag
    = stylesheet_link_tag "application", "data-turbo-track": "reload"
    = stylesheet_link_tag "actiontext"
    = javascript_importmap_tags
  %body.d-flex.flex-column.min-vh-100
    %nav.navbar.navbar-expand-lg.navbar-dark.bg-dark{ data: { testid: "admin-navbar" } }
      .container-fluid
        = link_to t("admin.navigation.dashboard"), admin_root_path, class: "navbar-brand"
        %button.navbar-toggler{ type: "button", data: { bs_toggle: "collapse", bs_target: "#adminNavbar" }, "aria-controls": "adminNavbar", "aria-expanded": "false", "aria-label": "Toggle navigation" }
          %span.navbar-toggler-icon
        #adminNavbar.collapse.navbar-collapse
          %ul.navbar-nav.me-auto.mb-2.mb-lg-0
            %li.nav-item
              = link_to t("admin.navigation.articles"), admin_articles_path, class: "nav-link"
            %li.nav-item
              = link_to t("admin.navigation.media_items"), admin_media_items_path, class: "nav-link"
            - if can? :manage, MediaTag
              %li.nav-item
                = link_to t("admin.navigation.tags"), admin_media_tags_path, class: "nav-link"
            - if can? :manage, User
              %li.nav-item
                = link_to t("admin.navigation.users"), admin_users_path, class: "nav-link"
          %ul.navbar-nav
            %li.nav-item.d-flex.align-items-center
              = link_to current_user.email_address, edit_admin_profile_path, class: "nav-link", data: { testid: "user-email" }, title: t("admin.profile.link_title")
              %span.badge.bg-secondary.me-2{ data: { testid: "user-role" } }= current_user.role
            %li.nav-item
              = link_to t("admin.navigation.back_to_site"), root_path, class: "nav-link"
            %li.nav-item
              = button_to t("admin.navigation.sign_out"), session_path, method: :delete, class: "nav-link btn btn-link"

    %main.flex-grow-1.py-4
      .container
        - if flash[:notice]
          .alert.alert-success.alert-dismissible.fade.show{ role: "alert", data: { testid: "flash-notice" } }
            = flash[:notice]
            %button.btn-close{ type: "button", data: { bs_dismiss: "alert" }, "aria-label": "Close" }

        - if flash[:alert]
          .alert.alert-danger.alert-dismissible.fade.show{ role: "alert", data: { testid: "flash-alert" } }
            = flash[:alert]
            %button.btn-close{ type: "button", data: { bs_dismiss: "alert" }, "aria-label": "Close" }

        = yield

    %footer.bg-light.py-3.mt-auto
      .container.text-center.text-muted
        %small OnlineMuseum Wartenberg - Administrationsbereich
