-# Header with Logo and Vignettes
%header.site-header{ data: { testid: "site-header" } }
  .container
    .header-top-row{ data: { testid: "header-top-row" } }
      .header-login{ data: { testid: "header-login" } }
        - if authenticated?
          = link_to admin_root_path, class: "header-login-icon", title: "Admin", data: { testid: "admin-link" } do
            %i.bi.bi-gear
          = button_to session_path, method: :delete, class: "header-login-icon header-login-button", title: "Abmelden", data: { testid: "logout-link" } do
            %i.bi.bi-box-arrow-right
        - else
          = link_to new_session_path, class: "header-login-icon", title: "Anmelden", data: { testid: "login-link" } do
            %i.bi.bi-person
      .header-search{ class: "#{'expanded' if params[:q].present?}", data: { testid: "header-search", controller: "search-toggle", "search-toggle-expanded-value": params[:q].present? } }
        = form_with url: search_path, method: :get, local: true, class: "header-search-form", data: { "search-toggle-target": "form" } do |f|
          .input-group.input-group-sm
            = text_field_tag :q, params[:q], class: "form-control header-search-input", placeholder: t("search.placeholder"), data: { testid: "header-search-input", "search-toggle-target": "input" }
            %button.btn.header-search-btn{ type: "submit", data: { testid: "header-search-submit", "search-toggle-target": "icon", action: "click->search-toggle#handleClick" } }
              %i.bi.bi-search
    .header-row
      .header-vignette.header-vignette-left
        = image_tag "design/Kaffee_Hag_Vignette_WBc.png", alt: "Kaffee Hag Vignette", class: "vignette-img"
      .header-logo
        = link_to root_path, data: { testid: "logo-link" } do
          %picture
            %source{ media: "(min-width: 768px)", srcset: image_path("logo/Logo-Online-Museum-V10-250.png") }
            %source{ media: "(min-width: 576px)", srcset: image_path("logo/Logo-Online-Museum-V10-180.png") }
            = image_tag "logo/Logo-Online-Museum-V10-100.png", alt: "OnlineMuseum Wartenberg Logo", class: "logo-img"
      .header-vignette.header-vignette-right
        = image_tag "design/Kaffee_Hag_Vignette_WBc.png", alt: "Kaffee Hag Vignette", class: "vignette-img"

-# Navigation
%nav.main-navigation{ data: { testid: "main-navigation" } }
  .container
    .nav-row.nav-row-primary
      = link_to "Willkommen", root_path, class: "nav-pill#{' active' if local_assigns[:active] == :willkommen}", data: { testid: "nav-willkommen" }
      .nav-pill.dropdown{ data: { controller: "dropdown", action: "mouseenter->dropdown#show mouseleave->dropdown#hide" } }
        = link_to "Kunstschaffende", artists_path, class: "nav-pill-link#{' active' if local_assigns[:active] == :kunstschaffende}", data: { testid: "nav-kunstschaffende" }
        %span.dropdown-arrow
        .dropdown-menu{ data: { dropdown_target: "menu" } }
          = link_to "Alle Kunstschaffende", artists_path, class: "dropdown-item"
          - if @nav_artists&.any?
            .dropdown-divider
            - @nav_artists.each do |artist|
              = link_to artist.name, artist_path(artist.slug), class: "dropdown-item"
      .nav-pill.dropdown{ data: { controller: "dropdown", action: "mouseenter->dropdown#show mouseleave->dropdown#hide" } }
        = link_to "Land & Leute", land_und_leute_path, class: "nav-pill-link#{' active' if local_assigns[:active] == :land_und_leute}", data: { testid: "nav-land-leute" }
        %span.dropdown-arrow
        .dropdown-menu{ data: { dropdown_target: "menu" } }
          = link_to "Alle Sammlungen", land_und_leute_path, class: "dropdown-item"
          - if @nav_collection_categories&.any?
            .dropdown-divider
            - @nav_collection_categories.each do |category|
              = link_to category.name, land_und_leute_path(anchor: category.slug), class: "dropdown-item"
    .nav-row.nav-row-secondary
      = link_to "Ausstellungen", ausstellungen_path, class: "nav-pill#{' active' if local_assigns[:active] == :ausstellungen}", data: { testid: "nav-ausstellungen" }
      = link_to "Team", team_path, class: "nav-pill#{' active' if local_assigns[:active] == :team}", data: { testid: "nav-team" }
      = link_to "Bild der Woche", bild_der_woche_path, class: "nav-pill#{' active' if local_assigns[:active] == :bild_der_woche}", data: { testid: "nav-bild-der-woche" }
      = link_to "Archiv", articles_path, class: "nav-pill#{' active' if local_assigns[:active] == :archiv}", data: { testid: "nav-archiv" }
