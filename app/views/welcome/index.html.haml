-# Header with Logo and Vignettes
%header.site-header{ data: { testid: "site-header" } }
  .container
    .header-login{ data: { testid: "header-login" } }
      - if authenticated?
        = link_to "Admin", admin_root_path, class: "header-login-link", data: { testid: "admin-link" }
        = button_to "Abmelden", session_path, method: :delete, class: "header-login-link header-login-button", data: { testid: "logout-link" }
      - else
        = link_to "Anmelden", new_session_path, class: "header-login-link", data: { testid: "login-link" }
    .header-row
      .header-vignette.header-vignette-left
        = image_tag "design/Kaffee_Hag_Vignette_WBc.png", alt: "Kaffee Hag Vignette", class: "vignette-img"
      .header-logo
        = link_to root_path, data: { testid: "logo-link" } do
          %picture
            %source{ media: "(min-width: 768px)", srcset: image_path("logo/Logo-Online-Museum-V10-250.png") }
            %source{ media: "(min-width: 576px)", srcset: image_path("logo/Logo-Online-Museum-V10-180.png") }
            = image_tag "logo/Logo-Online-Museum-V10-100.png", alt: "OnlineMuseum Wartenberg Logo", class: "logo-img"
      .header-vignette.header-vignette-right
        = image_tag "design/Kaffee_Hag_Vignette_WBc.png", alt: "Kaffee Hag Vignette", class: "vignette-img"

-# Navigation
%nav.main-navigation{ data: { testid: "main-navigation" } }
  .container
    .nav-row.nav-row-primary
      = link_to "Willkommen", root_path, class: "nav-pill active", data: { testid: "nav-willkommen" }
      .nav-pill.dropdown
        = link_to "Kunstschaffende", "#", class: "nav-pill-link", data: { testid: "nav-kunstschaffende" }
        %span.dropdown-arrow
      .nav-pill.dropdown
        = link_to "Land & Leute", "#", class: "nav-pill-link", data: { testid: "nav-land-leute" }
        %span.dropdown-arrow
    .nav-row.nav-row-secondary
      = link_to "Ausstellungen", "#", class: "nav-pill", data: { testid: "nav-ausstellungen" }
      = link_to "Team", "#", class: "nav-pill", data: { testid: "nav-team" }
      = link_to "Bild der Woche", "#", class: "nav-pill", data: { testid: "nav-bild-der-woche" }
      = link_to "Archiv", articles_path, class: "nav-pill", data: { testid: "nav-archiv" }

-# Hero Section with Background Image
%section.hero-section{ style: "background-image: url('#{image_path('design/background-pic-top-b-3.jpg')}')", data: { testid: "hero-section" } }
  .hero-overlay
    .container
      %h1.hero-title
        OnlineMuseum Wartenberg –
        %br
        ein Ort für Kunst und Kulturgeschichte

-# Welcome Content
%section.welcome-section{ data: { testid: "welcome-section" } }
  .container
    .text-center.py-2
      %h2.section-title Über uns
      %p.section-subtitle
        %em
          Kommen Sie mit auf eine Entdeckungsreise und erfahren Sie mehr über unsere Marktgemeinde
          anhand vieler digitalisierter Exponate von Kunstwerken, Fotografien, Postkarten und
          weiteren Archivalien.
    %hr

    .text-center.py-2
      %p.section-subtitle
        %em
          Das OnlineMuseum Wartenberg bewahrt und präsentiert die kulturelle Vielfalt unserer Region.
          Entdecken Sie historische Schätze, lokale Künstler und die Geschichte unserer Gemeinde
          in einer digitalen Sammlung, die stetig wächst.

- if @recent_articles.any?
  %section.articles-preview{ data: { testid: "recent-articles-section" } }
    .container
      .text-center.py-5
        %h2.section-title= t("welcome.recent_articles.title")

      - @recent_articles.each do |article|
        - presenter = ArticlePresenter.new(article)
        .article-item.py-4{ data: { testid: "recent-article-card-#{article.slug}" } }
          .row
            - if article.cover_image.attached?
              .col-md-2
                = link_to article_path(article.slug) do
                  = image_tag article.cover_image.variant(resize_to_limit: [400, 300]), class: "img-fluid", alt: article.title
              .col-md-10
                %h4
                  = link_to article.title, article_path(article.slug), class: "text-decoration-none"
                - if article.published_at.present?
                  %p.text-muted= presenter.formatted_published_at_short
                .article-excerpt
                  = presenter.excerpt(length: 1000)
                .mt-3
                  = link_to t("articles.index.read_more"), article_path(article.slug), class: "btn btn-sm btn-outline-primary"
            - else
              .col-12
                %h4
                  = link_to article.title, article_path(article.slug), class: "text-decoration-none"
                - if article.published_at.present?
                  %p.text-muted= presenter.formatted_published_at_short
                .article-excerpt
                  = presenter.excerpt(length: 300)
                .mt-3
                  = link_to t("articles.index.read_more"), article_path(article.slug), class: "btn btn-sm btn-outline-primary"
        %hr
      .text-center.py-4
        = link_to t("welcome.recent_articles.view_all"), articles_path, class: "btn btn-primary", data: { testid: "view-all-articles" }
